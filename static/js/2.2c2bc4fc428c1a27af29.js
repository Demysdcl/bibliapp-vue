webpackJsonp([2,4],{49:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.createPagination=function(t,e){var a={};return a.total=t.length,a.per_page=10,a.currentPage=e,a.total_pages=Math.ceil(a.total/a.per_page),a},e.createPage=function(t,e,a){var i=a*e.per_page,n=i-e.per_page;return i>t.length&&(i=t.length),t.slice(n,i)}},156:function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=a(5),s=i(n),r=a(10);e.default={name:"CcAuthorForm",data:function(){return{author:{id:null,firstName:"",lastName:"",fullName:function(){firstName+" "+lastName}}}},mounted:function(){this.fetch()},watch:{$route:"fetch"},computed:{isEditing:function(){return this.author.id>0},isValid:function(){return this.resetMessages(),""!==this.author.firstName||(this.setMessage({type:"error",message:["Please fill author firstName"]}),!1)}},methods:(0,s.default)({},(0,r.mapActions)(["setFetching","resetMessages","setMessage"]),{fetch:function(){var t=this,e=this.$route.params.id;void 0!==e&&(this.setFetching({fetching:!0}),this.$http.get("authors/"+e).then(function(e){var a=e.data.data,i=a.id,n=a.firstName,s=a.lastName;t.author.id=i,t.author.firstName=n,t.author.lastName=s,t.setFetching({fetching:!1})}))},submit:function(){this.isValid&&(this.setFetching({fetching:!0}),this.isEditing?this.update():this.save())},save:function(){var t=this;this.$http.post("authors",{firstName:this.author.firstName,lastName:this.author.lastName}).then(function(){t.$bus.$emit("author.created"),t.setFetching({fetching:!1}),t.setMessage({type:"success",message:"New author was created"}),t.reset()})},update:function(){var t=this;this.$http.put("authors/"+this.author.id,this.author).then(function(){t.$bus.$emit("author.updated"),t.setFetching({fetching:!1}),t.setMessage({type:"success",message:"Category was updated"})})},reset:function(){this.author.id=0,this.author.firstName="",this.author.lastName=""}})}},157:function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=a(5),s=i(n),r=a(10),o=a(49);e.default={name:"CcAuthors",methods:(0,s.default)({edit:function(t){var e=this.authors[t].id;this.$router.push({name:"authors.edit",params:{id:e},query:{page:this.currentPage}})},create:function(){this.$router.push({name:"authors.new",query:{page:this.currentPage}})},hide:function(){this.$router.push({name:"authors.index",query:{page:this.currentPage}})}},(0,r.mapActions)(["authorsSetData","setFetching"]),{fetch:function(){this.fetchPaginated(),this.fetchFullList()},fetchPaginated:function(){var t=this;this.setFetching({fetching:!0}),this.$http.get("authors").then(function(e){var a=e.data,i=(0,o.createPagination)(a,t.currentPage);t.authorsSetData({list:(0,o.createPage)(a,i,t.currentPage),pagination:i}),t.setFetching({fetching:!1})})},fetchFullList:function(){var t=this;this.setFetching({fetching:!0}),this.$http.get("authors").then(function(e){var a=e.data;t.authorsSetData({full_list:a}),t.setFetching({fetching:!1})})},navigate:function(t){this.$router.push({name:"authors.index",query:{page:t}})},askRemove:function(t){var e=this,a=this.authors[t];swal({title:"Are you sure?",text:"Author "+a.firstName+" will be permanently removed.",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, do it!",closeOnConfirm:!1},function(){return e.remove(a)})},remove:function(t){var e=this;this.$http.delete("authors/"+t.id).then(function(){e.fetchPaginated(),e.fetchFullList(),swal("Done!","Author removed.","success"),e.isFormVisible&&e.$router.push({name:"authors.index",query:{page:e.currentPage}})}).catch(function(t){swal("Falha!",t.response.data.messages[0],"error")})}}),watch:{currentPage:"fetchPaginated"},computed:(0,s.default)({},(0,r.mapState)({fetching:function(t){return t.fetching},pagination:function(t){return t.Authors.pagination},list:function(t){return t.Authors.list}}),{authors:function(){return this.list},currentPage:function(){return parseInt(this.$route.query.page,10)||1},isFormVisible:function(){return"authors.new"===this.$route.name||"authors.edit"===this.$route.name}}),beforeRouteLeave:function(t,e,a){this.$bus.$off("author.created"),this.$bus.$off("author.updated"),jQuery("body").off("keyup"),a()},mounted:function(){this.$bus.$on("author.created",this.fetch),this.$bus.$on("author.updated",this.fetch),this.fetchPaginated()}}},241:function(t,e,a){e=t.exports=a(40)(),e.push([t.id,".pagination[data-v-042ae382]{float:right;margin-top:20px}.button-within-header[data-v-042ae382]{margin-top:32px}.fade-enter-active[data-v-042ae382],.fade-leave-active[data-v-042ae382]{transition:opacity .7s ease}.fade-enter[data-v-042ae382],.fade-leave-active[data-v-042ae382]{opacity:0}","",{version:3,sources:["/./src/app/authors/main.vue"],names:[],mappings:"AACA,6BACE,YAAa,AACb,eAAiB,CAClB,AACD,uCACE,eAAiB,CAClB,AACD,wEACE,2BAA6B,CAC9B,AACD,iEACE,SAAW,CACZ",file:"main.vue",sourcesContent:["\n.pagination[data-v-042ae382] {\n  float: right;\n  margin-top: 20px;\n}\n.button-within-header[data-v-042ae382] {\n  margin-top: 32px;\n}\n.fade-enter-active[data-v-042ae382], .fade-leave-active[data-v-042ae382] {\n  transition: opacity .7s ease;\n}\n.fade-enter[data-v-042ae382], .fade-leave-active[data-v-042ae382] {\n  opacity: 0;\n}\n"],sourceRoot:"webpack://"}])},265:function(t,e,a){var i=a(241);"string"==typeof i&&(i=[[t.id,i,""]]);a(44)(i,{});i.locals&&(t.exports=i.locals)},284:function(t,e,a){var i,n;i=a(156);var s=a(293);n=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(n=i=i.default),"function"==typeof n&&(n=n.options),n.render=s.render,n.staticRenderFns=s.staticRenderFns,t.exports=i},285:function(t,e,a){var i,n;a(265),i=a(157);var s=a(292);n=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(n=i=i.default),"function"==typeof n&&(n=n.options),n.render=s.render,n.staticRenderFns=s.staticRenderFns,n._scopeId="data-v-042ae382",t.exports=i},292:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row"},[t._m(0),t._v(" "),a("div",{staticClass:"col-md-6 text-right"},[a("div",{staticClass:"button-within-header"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.isFormVisible,expression:"!isFormVisible"}],attrs:{type:"default",icon:"plus",size:"mini"},on:{click:t.create}}),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.isFormVisible,expression:"isFormVisible"}],attrs:{type:"default",icon:"minus",size:"mini"},on:{click:t.hide}})],1)])]),t._v(" "),a("transition",{attrs:{name:"fade"}},[a("router-view")],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:t.fetching,expression:"fetching",modifiers:{body:!0}}],staticStyle:{width:"100%"},attrs:{data:t.authors,stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"firstName",label:"First Name"}}),t._v(" "),a("el-table-column",{attrs:{prop:"lastName",label:"Last Name"}}),t._v(" "),a("el-table-column",{attrs:{label:"Options",width:"100"},inlineTemplate:{render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-button",{attrs:{type:"default",icon:"edit",size:"mini"},on:{click:function(e){t.edit(t.$index)}}}),t._v(" "),a("el-button",{attrs:{type:"default",icon:"delete",size:"mini"},on:{click:function(e){t.askRemove(t.$index)}}})],1)},staticRenderFns:[]}})],1),t._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":t.pagination.current_page,"page-size":t.pagination.per_page,layout:"total, prev, pager, next, jumper",total:t.pagination.total},on:{"current-change":t.navigate}})],1)],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-6"},[a("h1",[t._v("Author Management")])])}]}},293:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"well"},[a("el-form",{ref:"form",attrs:{model:t.author,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"Author firtName"}},[a("el-input",{model:{value:t.author.firstName,callback:function(e){t.$set(t.author,"firstName",e)},expression:"author.firstName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"Author lastName"}},[a("el-input",{model:{value:t.author.lastName,callback:function(e){t.$set(t.author,"lastName",e)},expression:"author.lastName"}})],1),t._v(" "),a("el-button",{on:{click:t.submit}},[t._v("Save")])],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=2.2c2bc4fc428c1a27af29.js.map